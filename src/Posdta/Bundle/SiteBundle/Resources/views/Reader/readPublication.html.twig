{# src/Posdta/Bundle/SiteBundle/Resources/views/Reader/readPublication.html.twig #}
<!DOCTYPE html>
<html>
<head>
	<title>Inicio</title>
	{% image '../app/Resources/public/img/favicon.png' %}
	<link rel="shortcut icon" href="{{ asset_url }}">
	{% endimage %}
	
	{% javascripts
		'../app/Resources/public/js/monocore.js' 
		'../app/Resources/public/js/monoctrl.js' 
		'../app/Resources/public/js/errorHandling.js' 
		'../app/Resources/public/js/jquery.js' %}
	<script src="{{ asset_url }}"></script>
	{% endjavascripts %}
	
	{% stylesheets 
		'../app/Resources/public/css/monocore.css' 
		'../app/Resources/public/css/monoctrl.css' 
		'../app/Resources/public/css/style2.css' filter='cssrewrite' %}
	<link rel="stylesheet" href="{{ asset_url }}" />
	{% endstylesheets %}
	
	<style>
		#reader { width: 450px; height: 600px; border: 1px solid #000;}
	</style>
</head>
<script type="text/javascript" >
var componentUrlBase = "{{ path('reader_components', {'componentId':'componentId'}) }}";
//alert(componentUrl);

$(document).ready(function(){
	 $("#nav").click(function(){
         $('#dropDownOptions').toggle();
         if($('#arrow').attr("src")=="../appImages/flecha.png")
         {
            $('#arrow').attr("src", "../appImages/flechaclick.png");
         }
         else
         {
            $('#arrow').attr("src", "../appImages/flecha.png");
         }
         
     });
});

var bookData = {
  getComponents: function () {
    return [
      {% for component in publication.components %}
		{% if not loop.last %}
			'{{ component.id }}',
		{% else %}
			'{{ component.id }}'
		{% endif %}
      {% endfor %}
    ];
  },
  getContents: function () {
    return [
      {
        title: 'Chapter 1',
        src: 'component1.xhtml'
      },
      {
        title: 'Chapter 2',
        src: 'component3.xhtml'
      }
    ]
  },
  getComponent: function (componentId) {
    return getBookComponent(componentId);
  },
  getMetaData: function(key) {
    return {
      title: 'A book',
      creator: 'Inventive Labs'
    }[key];
  }
};

function getBookComponent(componentId) {
	componentUrl = componentUrlBase.replace('componentId',componentId);
	var response = $.ajax({
		type: "GET",
		url: componentUrl,
		error:function(xhr, status, text){
			displayErrorByCode(xhr.status);
		},
		async: false
	}).responseText;
	return response;
}

</script>
<body>
	<div class="header">
		<div class="container_12">
			<!-- Posdta Logo -->
			<div class="grid_2 alpha">
				<img class="logo" src="../appImages/logo.png">
			</div>
			
			<!-- Search Bar -->
			<div class="grid_7 center">
				<div class="ui-widget">
					<input type="text" class="searchBar" id="searchBarInput" onfocus="if (this.value=='Busca tu libro...') this.value = ''" value="Busca tu libro..." onblur="if (this.value=='') this.value = 'Busca tu libro...'">
					<img class="glass" src="../appImages/busqueda.png">
				</div>
			</div>
			
			<div class="grid_3 omega">
				<table class="userPanel">
					<tr>
						<td>
							<div id="pictureFrame" class="pictureFrame" style=""></div>
						</td>
						<td></td>
						<td>
							<div id="nav">
							<img id="arrow"  class="badges" src="../appImages/flecha.png">
								<div id="dropDownOptions" style="display: none">
									<a class="loginTag" href="amigos" id="amigos">Conocidos</a>
									<br><a class="loginTag" href="{{ path('logout') }}" id="salir" >Salir</a>
								</div>
							</div>
						</td>
					</tr>
				</table>
			</div>
			
		</div>
	</div>
	
	<div class="container_12 clearfix" id="contentContainer">
		
		<div id="reader">
			<h1>Reader</h1>
		</div>
		<script>Monocle.Reader('reader', bookData/*, {}, function(reader) {/*reader.moveTo({ page: 3});}*/);</script>
	
	
		<div class="grid_12 footer">
			Siguenos en <a class="followLink" target="_blank" href="http://www.facebook.com/posdta">Facebook</a> | <a class="followLink" target="_blank" href="http://www.twitter.com/posdta">Twitter</a> | Como funciona &nbsp; | Acerca de &nbsp; | Contacto | Copyright 2012
		</div>
	</div>
</body>

</html>
